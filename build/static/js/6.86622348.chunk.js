(this["webpackJsonpdiaries-app"]=this["webpackJsonpdiaries-app"]||[]).push([[6],{287:function(e,a,t){"use strict";var r=t(288),n=t.n(r),s=t(289),i=t(298),o=t.n(i),c=t(290),l=o.a.create({baseURL:"https://diaries.app"});l.defaults.headers.post["Content-Type"]="application/json",l.interceptors.response.use(function(){var e=Object(s.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.status>=200&&a.status<300)){e.next=2;break}return e.abrupt("return",a.data);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),(function(e){var a,t,r=e.response,n=e.request;if(r){if(r.status>=400&&r.status<500)return Object(c.a)(null===(a=r.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message,"error"),null}else if(n)return Object(c.a)("Request failed. Please try again.","error"),null;return Promise.reject(e)})),a.a=l},290:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var r=t(296),n=t.n(r),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something happened.",a=arguments.length>1?arguments[1]:void 0;n.a.fire({titleText:e,position:"top-end",timer:3e3,timerProgressBar:!0,toast:!0,showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"Dismiss",icon:a,showClass:{popup:"swal2-noanimation",backdrop:"swal2-noanimation"},hideClass:{popup:"",backdrop:""}})}},330:function(e,a,t){"use strict";t.r(a);var r=t(292),n=t(0),s=t.n(n),i=t(329),o=t(328),c=t(287),l=t(143),u=t(90),p=t(86),m=o.a().shape({username:o.b().required("What? No username?").max(16,"Username cannot be longer than 16 characters"),password:o.b().required('Without a password, "None shall pass!"'),email:o.b().email("Please provide a valid email address (abc@xy.z)")});a.default=function(){var e=Object(i.a)({validationSchema:m}),a=e.handleSubmit,t=e.register,o=e.errors,d=Object(n.useState)(!0),h=Object(r.a)(d,2),b=h[0],f=h[1],v=Object(n.useState)(!1),E=Object(r.a)(v,2),g=E[0],w=E[1],j=Object(p.b)();return s.a.createElement("div",{className:"auth"},s.a.createElement("div",{className:"logo-container"},s.a.createElement("h1",{className:"logo"},"Diary App")),s.a.createElement("div",{className:"card"},s.a.createElement("form",{onSubmit:a((function(e){var a=b?"/auth/login":"/auth/signup";c.a.post(a,e).then((function(e){if(e){var a=e.user,t=e.token;j(Object(l.b)(t)),j(Object(u.b)(a)),j(Object(l.c)(!0))}})).catch((function(e){console.log(e)})).finally((function(){w(!1)}))}))},s.a.createElement("div",{className:"inputWrapper"},s.a.createElement("input",{ref:t,name:"username",placeholder:"Username"}),o&&o.username&&s.a.createElement("p",{className:"error"},o.username.message)),s.a.createElement("div",{className:"inputWrapper"},s.a.createElement("input",{ref:t,name:"password",type:"password",placeholder:"Password"}),o&&o.password&&s.a.createElement("p",{className:"error"},o.password.message)),!b&&s.a.createElement("div",{className:"inputWrapper"},s.a.createElement("input",{ref:t,name:"email",placeholder:"Email (optional)"}),o&&o.email&&s.a.createElement("p",{className:"error"},o.email.message)),s.a.createElement("div",{className:"inputWrapper"},s.a.createElement("button",{type:"submit",disabled:g},b?"Login":"Create account")),s.a.createElement("p",{onClick:function(){return f(!b)},style:{cursor:"pointer",opacity:.7}},b?"No account? Create one":"Already have an account?"))))}}}]);
//# sourceMappingURL=6.86622348.chunk.js.map